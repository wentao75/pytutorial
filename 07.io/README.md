# 格式输出
* 使用格式化字符串输出
在字符串引号或三引号开始前以字母```f```或```F```开始。在字符串中，你可以在```{```和```}```中使用Python的表达式
* 使用```str.format()```的字符串方法
这同上述方法类似，也可以在花括号中标记变量替换的位置，并可以使用详细的格式化指令，还需要提供要格式化的信息
* 通过字符串方法自行处理

如果只是为了一些简单的目的显示变量，那么可以通过```repr()```和```str()```方法转换数值到字符串进行显示。

```str()```方法通常是以人可读的方式返回字符串结果；而```repr()```是以解释器可读的方式返回结果。在大部分的情况下，这两个方法返回的结果是相同的。

## 格式化字符串
* 以f或F开始的字符串（在运行时的一个计算表达式）
* 连续的两个花括号表示单独的花括号符号
* 用花括号表示替换字段，以Python表达式开始，可以在其后跟随以感叹号```!```引入的转换字段，如果需要做格式定义，那么在转换字段后使用冒号```:```引入
* 其中的表达式是由括号括起来的常规Python表达式，但是不能是空表达式；lambda表达式必须由括号括起来；
* 替换表达式可以包括换行（比如在三引号的字符串中），但是不能包含注释
* 如果引入了转换字段，在格式化之前评估表达式的结果。!s在结果上调用```str()```；!r在结果上调用```repr()``` !a调用```ascii()```
* 格式说明符和```string.format()```方法所使用的相同
* 格式说明符基本
```
**format_spec**     ::=  [[fill]align][sign][#][0][width][grouping_option][.precision][type]
**fill**            ::=  <any character>
**align**           ::=  "<" | ">" | "=" | "^"
**sign**            ::=  "+" | "-" | " "
**width**           ::=  digit+
**grouping_option** ::=  "_" | ","
**precision**       ::=  digit+
**type**            ::=  "b" | "c" | "d" | "e" | "E" | "f" | "F" | "g" | "G" | "n" | "o" | "s" | "x" | "X" | "%"
```

## String ```format()```方法
format方法使用的基本格式化和上面类似，其中替换的数据在format方法的参数中提供，字符串中可以使用位置，参数名称方式进行指定替换。位置可以默认递增的方式不指定。

如果传递字典方式，可以使用字典的key和’[]‘方式访问替换；如果采用'**'标记方式传递参数，就可以直接利用key来替换。

## 旧的字符串格式化
```%```操作符也能够用于字符串格式化，在它右边是参数，左边为格式化字符串；返回为格式化后的字符串结果。

# 文件读写

```open()```方法返回一个文件对象，它通常用两个参数：```open(文件名, 模式)```

```Python
>>> f = open('workfile', 'w')

```

另外一个比较好的使用习惯，是使用```with```关键字来处理文件对象。这样可以在正常完成后正确的关闭，即使在有异常抛出时也能够正常处理。而且使用```with```比写```try-finally```结构更加简洁。

如果不采用```with```关键字，那么需要在结束的时候调用```f.close()```主动关闭文件，这样可以立刻释放占用的系统资源。假如不这样做，Python垃圾回收最终也会销毁对象关闭文件，但是这样会保持一段时间的占用。而且不同的Python实现采用的方式和时间也会有较大的差异，存在运行时的风险。

## 文件对象的方法
```f.read(size)```能够返回一定量的数据，在文本模式下作为字符串，在二进制模式下作为字节对象。参数size是可选的。

```f.readline()```从文件中读取一行，换行符（\n）仍然保留在字符串最后，文件最后一行会忽略换行符。这种情况下应当注意，如果返回一个空字符串，那么是到达文件末尾；如果空行最后有换行符，那么只是当前行为空，仍然有新行。

可以对一个文件对象循环读行内容，这样执行的内存使用高效，快速，代码简单。
```Python
for line in f:
    print(line, end="")
```

```f.write(string)```将字符串内容写入到文件，返回写入文件的字符数。

其它类型的对象需要进行转换再写入文件，文本模式下写入字符串；再二进制模式下写入字节对象。

```f.tell()```返回文件对象当前位置（整数），位置是从文件开始到当前位置在二进制模式下的字节数。

如果需要改变当前文件对象读写位置，可以使用```f.seek(offset, from_what)```方法。位置的计算通过参考点增加offset偏移获得，参考位置from_what可以有3个取值，0 表示从文件头开始；1 表示当前位置；2 表示文件结尾；默认取值为0.

在文本文件中（文件模式中不使用b），只能使用相对于文件头的位置方式可以使用，否则会产生异常错误。

## 利用json保存结构数据
对于比较复杂的数据结构，在Python中可以使用流行的JSON（JaveScript Object Notation）数据交换格式表示。标准模块json能够将Python数据转换为字符串表达，这个过程叫做序列化（Serializing），也可以从字符串重新构建出数据，这个逆过程叫做反序列化（deserializing）。字符串可以通过保存在文件，或者通过网络连接在远程计算机之间传递。

```json.dump(x, f)```可以将对象序列化存储到文本文件f中；

```json.load(f)```可以将文本文件中的对象反序列化并返回。
